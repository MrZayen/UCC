<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0 user-scalable=no">
  <meta http-equiv="X-UA-Compatible" content="ie=edge">
  <title>United Cultural Club</title>
  <link rel="stylesheet" href="style.css">
  <style type="text/css" media="all">
    :root{
      --color: #000000;
      --backgroundColor: #FFFFFF;
      --surfaceColor: #F5F5F5;
      --deviderColor: #E8E8E8;
      --avatarColor: #FFFFFF;
    }
    body {
      margin: 0;
      padding: 0;
      font-family: Sans-Serif;
    }
    .activity_main {
      width: 100%;
      height: 100vh;
      color: var(--color);
      fill: var(--color);
      background-color: var(--backgroundColor);
      overflow: scroll;
      scroll-behavior: smooth;
    }
    .activity_main header {
      width: 100%;
      max-width: 600px;
      height: 100px;
      background-color: var(--backgroundColor);
      margin: 0 auto;
      border-bottom: 1px solid var(--deviderColor);
      position: sticky;
      top: -50px;
      user-select: none;
      z-index: 98;
    }
    .activity_main .top-bar {
      width: 100%;
      height: 50px;
      position: relative;
    }
    .activity_main .top-bar__icon {
      width: 35px;
      height: 35px;
      position: absolute;
      left: 50%;
      top: 50%;
      transform: translate(-50%, -50%);
    }
    .activity_main .tab-bar {
      width: 100%;
      height: 50px;
      display: flex;
    }
    .activity_main .tab-bar__btn {
      flex: 1;
      height: 100%;
      display: flex;
      justify-content: center;
      align-items: center;
    }
    .activity_main .tab-bar__btn-title {
      height: 100%;
      position: relative;
      display: flex;
      justify-content: center;
      align-items: center;
    }
    .activity_main .tab-bar__btn-title span {
      font-size: 15px;
      font-weight: 420;
    }
    .activity_main .tab-bar__btn.active .tab-bar__btn-title::after {
      content: "";
      width: 100%;
      height: 4px;
      border-radius: 100px;
      background-color: var(--color);
      position: absolute;
      bottom: 0;
    }
    .activity_main .tab-bar__btn.active .tab-bar__btn-title span {}

    .activity_main main {
      width: 100%;
      max-width: 600px;
      margin: 0 auto;
    }
    .activity_main .container {
      width: 100%;
    }
    .activity_main .container .fragment {
      width: 100%;
      padding-bottom: 15px;
      opacity: 0;
      transform: translateY(-4.5px);
      display: none;
    }
    .activity_main .container .fragment.show {
      display: block;
    }
    
    .main-card{
      width: 100%;
      max-width: 600px;
      margin: 0 auto;
      padding: 15px;
      box-sizing: border-box;
      user-select: none;
    }
    .main-card .details{
      width: 100%;
      padding: 15px;
      box-sizing: border-box;
      border-radius: 10px;
      background-color: var(--surfaceColor);
    }
    .total-amount{
      width: 100%;
      margin-bottom: 10px;
      display: flex;
      align-items: center;
    }
    .total-amount__details{
      flex: 1;
    }
    .total-amount__title span{
      font-size: 12px;
      font-weight: 400;
      text-transform: uppercase;
      letter-spacing: 1px;
    }
    .total-amount__amount span{
      font-size: 35px;
      font-weight: bold;
    }
    /*.total-amount__logo{
      width: 50px;
      height: 50px;
      display: flex;
      justify-content: center;
      align-items: center;
    }*/
    .total-amount__logo .logo{
      width: 20px;
      height: 20px;
      border-radius: 100px;
    }
    .fragment--collections .total-amount__logo .logo{
      border: 10px solid #2FDF85;
    }
    .fragment--expanses .total-amount__logo .logo{
      border: 10px solid #FF0000;
    }
    .remaining-amount{
      width: 100%;
      display: flex;
      align-items: center;
    }
    .remaining-amount__details{
      flex: 1;
    }
    .remaining-amount__title span{
      font-size: 12px;
      font-weight: 400;
      text-transform: uppercase;
      letter-spacing: 1px;
    }
    .remaining-amount__amount span{
      font-size: 20px;
      font-weight: bold;
    }
    .remaining-amount__logo{
      width: 40px;
      height: 40px;
      display: flex;
      justify-content: center;
      align-items: center;
    }
    .remaining-amount__logo .logo{
      width: 30px;
      height: 30px;
    }
    .main-card__devider{
      width: 100%;
      padding: 0 15px;
      box-sizing: border-box;
      display: none;
    }
    .main-card__devider__line{
      width: 50px;
      height: 30px;
      position: relative;
    }
    .main-card__devider__line::after{
      content: "";
      width: 3px;
      height: 100%;
      background-color: var(--color);
      position: absolute;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
    }
    
    .activity_main .card {
      width: 100%;
      max-width: 600px;
      margin: 0 auto;
      user-select: none;
    }
    .activity_main .card__header {
      width: 100%;
      padding: 15px;
      box-sizing: border-box;
      display: flex;
      align-items: center;
    }
    .activity_main .card .header__logo {
      width: 50px;
      height: 50px;
      border-radius: 100%;
      display: flex;
      justify-content: center;
      align-items: center;
      overflow: hidden;
    }
    .activity_main .card .header__logo img{
      width: 100%;
    }
    .activity_main .card .header__logo span{
      width: 100%;
      height: 100%;
      display: flex;
      justify-content: center;
      align-items: center;
      color: var(--avatarColor);
      font-size: 25px;
      font-weight: 450;
    }
    .activity_main .card .header__details {
      flex: 1;
      height: 50px;
      padding-left: 10px;
      display: flex;
      flex-direction: column;
      justify-content: center;
    }
    .activity_main .card .card__header .header__title{
      margin-bottom: 2.5px;
    }
    .activity_main .card .card__amount{
      width: 78px;
      padding: 10px 0px;
      border-radius: 100px;
      color: var(--backgroundColor);
      background-color: var(--color);
      display: flex;
      justify-content: center;
      align-items: center;
      font-weight: 450;
    }
    .activity_main .card__body {
      width: 100%;
      padding: 0 15px;
      box-sizing: border-box;
      display: flex;
    }
    .activity_main .card__space {
      width: 50px;
      min-height: 80px;
      position: relative;
    }
    .activity_main .card__space::after {
      content: "";
      width: 3px;
      height: 100%;
      background-color: var(--color);
      position: absolute;
      left: 50%;
      top: 50%;
      transform: translate(-50%, -50%);
    }
    .activity_main .card:last-child .card__space::after {
      display: none;
    }
    .activity_main .card__details {
      flex: 1;
      padding-left: 10px;
    }
    .activity_main .card__details .details{
      width: 100%;
      /*padding: 15px;
      box-sizing: border-box;
      border-radius: 10px;
      background-color: var(--surfaceColor);*/
    }
    .activity_main .sub-card{
      width: 100%;
    }
    .activity_main .sub-card__header{
      width: 100%;
      padding: 15px;
      box-sizing: border-box;
      border-radius: 10px;
      background-color: var(--surfaceColor);
      display: flex;
      align-items: center;
    }
    .activity_main .sub-card__header__logo{
      width: 50px;
      height: 50px;
      border-radius: 100%;
      display: flex;
      justify-content: center;
      align-items: center;
      overflow: hidden;
    }
    .activity_main .sub-card__header__logo img{
      width: 100%;
    }
    .activity_main .sub-card__header__logo span{
      width: 100%;
      height: 100%;
      display: flex;
      justify-content: center;
      align-items: center;
      color: var(--avatarColor);
      font-size: 25px;
      font-weight: 450;
    }
    .activity_main .sub-card__header__logo div{
      width: 100%;
      height: 100%;
      display: flex;
      align-items: start;
    }
    .activity_main .sub-card__header__logo video{
      width: 100%;
    }
    .activity_main .sub-card__header__details{
      flex: 1;
      height: 50px;
      padding-left: 10px;
      display: flex;
      flex-direction: column;
      justify-content: center;
    }
    .activity_main .sub-card__header__details .sub-card__header__title{
      font-size: 15.5px;
    }
    .activity_main .sub-card__header__details .sub-card__header__description{
      font-weight: bold;
    }
    .activity_main .sub-card__btn{
      width: 22px;
      height: 22px;
      display: none;
    }
    .activity_main .sub-card__btn.show{
      display: block;
    }
    .activity_main .sub-card__body{
      width: 100%;
      height: 50px;
      padding: 10px 0;
      box-sizing: border-box;
      
      height: 15px;
    }
    .activity_main .sub-card__space{
      width: 50px;
      height: 100%;
      position: relative;
      
      display: none;
    }
    .activity_main .sub-card__space::after {
      content: "";
      width: 3px;
      height: 100%;
      background-color: var(--color);
      position: absolute;
      left: 50%;
      top: 50%;
      transform: translate(-50%, -50%);
    }
    
    
    .activity_details{
      width: 100%;
      height: 100vh;
      color: var(--color);
      fill: var(--color);
      background-color: var(--backgroundColor);
      position: fixed;
      top: 0;
      display: none;
      overflow: scroll;
      z-index: 99;
    }
    .activity_details.show{
      display: block;
    }
    .activity_details header{
      width: 100%;
      max-width: 600px;
      height: 60;
      background-color: var(--backgroundColor);
      margin: 0 auto;
      position: sticky;
      top: 0px;
      user-select: none;
      z-index: 100;
    }
    .activity_details .nav-bar{
      width: 100%;
      height: 60px;
      padding: 15px;
      box-sizing: border-box;
      background-color: var(--backgroundColor);
      display: flex;
      align-items: center;
    }
    .activity_details .nav-btn{
      width: 25px;
      height: 25px;
    }
    .activity_details main{
      width: 100%;
      max-width: 600px;
      margin: 0 auto;
    }
    .activity_details .container{
      width: 100%;
    }
    .activity_details .card{
      width: 100%;
      max-width: 600px;
      margin: 0 auto;
      user-select: none;
    }
    .activity_details .card__header{
      width: 100%;
      padding: 15px 20px;
      box-sizing: border-box;
      background-color: ;
    }
    .activity_details .card__header .header__title{
      font-weight: bold;
    }
    .activity_details .card__details{
      width: 100%;
      padding: 10px 20px;
      box-sizing: border-box;
    }
    .activity_details .sub-card{
      width: 100%;
      height: 70px;
      margin-bottom: 20px;
      border-top-right-radius: 10px;
      border-bottom-right-radius: 10px;
      background-color: var(--surfaceColor);
      display: flex;
      overflow: hidden;
    }
    .activity_details .sub-card__space{
      width: 8px;
      height: 100%;
      /*border-radius: 10px;*/
    }
    .activity_details .sub-card__details{
      flex: 1;
      height: 100%;
      padding-left: 15px;
      display: flex;
      flex-direction: column;
      justify-content: center;
    }
    .activity_details .sub-card__details .sub-card__title{
      margin-bottom: 3px;
      font-size: 16px;
      font-weight: 450;
    }
    .activity_details .sub-card__details .sub-card__description{
      font-weight: bold;
    }
    
    
    .devider{
      width: 100%;
      height: 1px;
      background-color: var(--deviderColor);
      position: fixed;
      bottom: 0;
      z-index: 100;
    }
    
    @keyframes transitionIn{
      from{
        opacity: 0;
        transform: translateY(-4.5px);
      }
      to{
        opacity: 1;
        transform: translateY(0);
      }
    }
    
    @media (prefers-color-scheme: dark) {
      :root{
        --color: #FFFFFF;
        --backgroundColor: #000000;
        --surfaceColor: #252525;
        --deviderColor: #282828;
        --avatarColor: #000000 
      }
    }
  </style>
</head>
<body>
  <div class="activity_main">
    <header>
      <div class="top-bar">
        <div class="top-bar__icon top-bar__btn">
          <svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" version="1.1" id="Capa_1" x="0px" y="0px" viewBox="0 0 24 24" style="enable-background:new 0 0 24 24;" xml:space="preserve">
            <path d="M17.523,15.342c-0.552,0-1-0.447-1-0.999s0.447-1,0.999-1c0.552,0,1,0.447,1,0.999  C18.522,14.894,18.075,15.341,17.523,15.342 M6.477,15.342c-0.552,0-1-0.447-1-0.999c0-0.552,0.447-1,0.999-1  c0.552,0,1,0.447,1,0.999C7.476,14.894,7.029,15.341,6.477,15.342 M17.881,9.322l1.997-3.459c0.115-0.199,0.047-0.453-0.152-0.568  c-0.199-0.115-0.453-0.047-0.568,0.152l0,0l-2.022,3.503C15.59,8.244,13.853,7.851,12,7.851S8.41,8.244,6.863,8.949L4.841,5.447  C4.726,5.248,4.472,5.18,4.273,5.294C4.075,5.409,4.006,5.663,4.121,5.862l0,0l1.997,3.46c-3.43,1.865-5.775,5.337-6.119,9.44h24  C23.656,14.659,21.311,11.187,17.881,9.322" />
          </svg>
        </div>
      </div>
      <div class="tab-bar">
        <div class="tab-bar__btn active">
          <div class="tab-bar__btn-title">
            <span>Collections</span>
          </div>
        </div>
        <div class="tab-bar__btn">
          <div class="tab-bar__btn-title">
            <span>Expanses</span>
          </div>
        </div>
      </div>
    </header>
    <main>
      <div class="container">
        <div class="fragment fragment--collections show">
          <div class="main-card">
            <div class="details">
              <div class="total-amount">
                <div class="total-amount__details">
                  <div class="total-amount__title">
                    <span>Total Donetion Collection</span>
                  </div>
                  <div class="total-amount__amount total-collection"></div>
                </div>
                <div class="total-amount__logo">
                  <div class="logo"></div>
                </div>
              </div>
              <div class="remaining-amount">
                <div class="remaining-amount__details">
                  <div class="remaining-amount__title">
                    <span>Remaining Amount</span>
                  </div>
                  <div class="remaining-amount__amount"></div>
                </div>
                <div class="remaining-amount__logo">
                  <div class="logo"></div>
                </div>
              </div>
            </div>
          </div>
          <div class="main-card__devider">
            <div class="main-card__devider__line"></div>
          </div>
          <div class="default-collection"></div>
        </div>
        <div class="fragment fragment--expanses">
          <div class="main-card">
            <div class="details">
              <div class="total-amount">
                <div class="total-amount__details">
                  <div class="total-amount__title">
                    <span>Total Expenses</span>
                  </div>
                  <div class="total-amount__amount total-expenses"></div>
                </div>
                <div class="total-amount__logo">
                  <div class="logo"></div>
                </div>
              </div>
              <div class="remaining-amount">
                <div class="remaining-amount__details">
                  <div class="remaining-amount__title">
                    <span>Remaining Amount</span>
                  </div>
                  <div class="remaining-amount__amount"></div>
                </div>
                <div class="remaining-amount__logo">
                  <div class="logo"></div>
                </div>
              </div>
            </div>
          </div>
          <div class="main-card__devider">
            <div class="main-card__devider__line"></div>
          </div>
          <div class="default-expanse"></div>
        </div>
      </div>
    </main>
  </div>
  
  <div class="activity_details">
    <header>
      <div class="nav-bar">
        <div class="nav-btn">
          <svg xmlns="http://www.w3.org/2000/svg" id="Bold" viewBox="0 0 24 24"><path d="M17.921,1.505a1.5,1.5,0,0,1-.44,1.06L9.809,10.237a2.5,2.5,0,0,0,0,3.536l7.662,7.662a1.5,1.5,0,0,1-2.121,2.121L7.688,15.9a5.506,5.506,0,0,1,0-7.779L15.36.444a1.5,1.5,0,0,1,2.561,1.061Z"/></svg>
        </div>
      </div>
    </header>
    <main>
      <div class="container"></div>
    </main>
  </div>
  
  <div class="devider"></div>


  <script type="text/javascript" charset="utf-8">

    let activityMain = document.querySelectorAll(".activity_main")[0];
    let topBarBtn = document.querySelectorAll(".top-bar__btn");
    let tabBarBtn = document.querySelectorAll(".tab-bar__btn");
    let tabFragment = document.querySelectorAll(".fragment");
    
    document.onreadystatechange = function () {
      if (document.readyState == "complete") {
        document.querySelectorAll(".fragment").forEach((fragment)=>{
          fragment.style.animation = "transitionIn 0.7s forwards"
        })
      }
    }
    
    let activeTabBtn = sessionStorage.getItem("activeTabBtn");
    if (activeTabBtn === null) {
      sessionStorage.setItem("activeTabBtn", "collectionsTabBtn");
      sessionStorage.setItem("collectionsScrollTop", 0);
    }

    topBarBtn.forEach((btn)=> {
      btn.addEventListener("click", ()=> {
        sessionStorage.clear();
        location.reload();
      })
    });

    tabBarBtn.forEach((btn, index)=> {
      btn.addEventListener("click", ()=> {
        if (!btn.classList.contains("active")) {
          tabBarBtn.forEach((btn)=> {
            btn.classList.remove("active");
          });
          btn.classList.add("active");
          tabFragment.forEach((fragment)=> {
            fragment.classList.remove("show");
          });
          tabFragment[index].classList.add("show");

          switch (index) {
            case 0:
              let collectionsScrollTop = sessionStorage.getItem("collectionsScrollTop");
              if (collectionsScrollTop === null) {
                sessionStorage.setItem("collectionsScrollTop", 0);
              }
              sessionStorage.setItem("activeTabBtn", "collectionsTabBtn");
              restoreState(false);
              break;
            case 1:
              let expansesScrollTop = sessionStorage.getItem("expansesScrollTop");
              if (expansesScrollTop === null) {
                sessionStorage.setItem("expansesScrollTop", 0);
              }
              sessionStorage.setItem("activeTabBtn", "expansesTabBtn");
              restoreState(false);
              break;
          };

        } else {};
      });
    });

    activityMain.addEventListener("scroll", (e)=> {
      let activeTabBtn = sessionStorage.getItem("activeTabBtn");
      if (activeTabBtn === "collectionsTabBtn") {
        sessionStorage.setItem("collectionsScrollTop", e.target.scrollTop);
      } else if (activeTabBtn === "expansesTabBtn") {
        sessionStorage.setItem("expansesScrollTop", e.target.scrollTop);
      };
    });

    restoreState(true);

    function restoreState(isFirstTime) {
      let activeTabBtn = sessionStorage.getItem("activeTabBtn");
      let collectionsScrollTop = sessionStorage.getItem("collectionsScrollTop");
      let expansesScrollTop = sessionStorage.getItem("expansesScrollTop");

      if (activeTabBtn === "collectionsTabBtn") {
        if (isFirstTime) {
          tabBarBtn[0].click();
        }
        activityMain.scrollTop = collectionsScrollTop;
      } else if (activeTabBtn === "expansesTabBtn") {
        if (isFirstTime) {
          tabBarBtn[1].click();
        }
        activityMain.scrollTop = expansesScrollTop;
      }
    }
  </script>

  <script type="module" charset="utf-8">
    import collections from "./scripts/collections.js";
    import expenses from "./scripts/expenses.js";

    add("collections", collections);
    add("expenses", expenses);
    setMainCardBackgroundColor();
    setSubCardBackgroundColor();
    
    
    //
    let subCard = document.querySelectorAll(".subCard");
    let detailsCardData = [];
    subCard.forEach((subCard) => {
      subCard.addEventListener("click", ()=>{
        if (subCard.id !== "undefined"){
          localStorage.setItem("clickedSubCardId", `${subCard.id}`);
          document.querySelector(".activity_main").style.overflow = "hidden";
          document.querySelector(".activity_details").classList.add("show");
          let defaultCard = document.createElement("div");
          defaultCard.classList.add("default-card");
          document.querySelector(".activity_details .container").appendChild(defaultCard);
          detailsCardData = [];
          addDetails([collections, expenses]);
          createDetailsCard(detailsCardData);
          setDetailsSubCardBackgroundColor();
        };
      });
    });
    
    document.querySelector(".activity_details header .nav-btn").addEventListener("click", () => {
      document.querySelector(".activity_main").style.overflow = "scroll";
      document.querySelector(".activity_details").classList.remove("show");
      document.querySelector(".activity_details .container").innerHTML = "";
    })
    //
    
    document.querySelectorAll(".remove").forEach((item)=>{
      item.remove();
    })
    
    document.querySelectorAll(".sub-card__header__video").forEach((video)=>{
      video.addEventListener("click", ()=>{
        if(video.muted){
          document.querySelectorAll(".sub-card__header__video").forEach((video)=>{
            video.muted = true;
          });
          video.muted = false;
          video.play();
        }else{
          video.muted = true;
          video.play();
        }
      })
    });
    
    function add(type, cardData) {
      let totalCollection = 0,
      totalExpanses = 0;
      cardData.forEach((cardData)=> {
        
        let subCardData;
        if (type === "collections") {
          subCardData = cardData.getCollections;
        } else if (type === "expenses") {
          subCardData = cardData.getExpenses;
        };
        
        const div = document.createElement("div");
        
        subCardData.forEach((subCardData)=> {
          let subCard = document.createElement("div");
          subCard.classList.add("sub-card");
          
          let subCardId;
          if (subCardData.getId){
            subCardId = subCardData.getId;
          };
          
          let subCardLogo;
          if(subCardData.getLogoInfo.getType === "img"){
            if(!subCardData.getLogoInfo.isPng){
              subCardLogo = `<img src="${subCardData.getImage}"/>`;
            }else{
              subCardLogo = `<img src="${subCardData.getImage}" style="background-color:red"/>`;
            };
          }else if(subCardData.getLogoInfo.getType === "txt"){
            subCardLogo = `<span style="background-color:${subCardData.getLogoInfo.getAvatarColor}">${subCardData.getAvatar}</span>`;
          }else if(subCardData.getLogoInfo.getType === "vid"){
            subCardLogo = `<div><video src="${subCardData.getVideo}" class="sub-card__header__video" autoplay muted loop></video></div>`;
          };
          
          subCard.innerHTML = `<div class="sub-card__header ${subCardData.getClasses[0]}" id="${subCardId}">
                                 <div class="sub-card__header__logo">${subCardLogo}</div>
                                 <div class="sub-card__header__details">
                                   <div class="sub-card__header__title">
                                     <span>${subCardData.getInformation.getTitle}</span>
                                   </div>
                                   <div class="sub-card__header__description">
                                     <span>₹${numberWithCommas(subCardData.getInformation.getAmount)}</span>
                                   </div>
                                 </div>
                                 <div class="sub-card__btn ${subCardData.getClasses[1]}">
                                     <svg xmlns="http://www.w3.org/2000/svg" id="Bold" viewBox="0 0 24 24"><path d="M13.1,19.5a1.5,1.5,0,0,1-1.061-2.561l4.586-4.585a.5.5,0,0,0,0-.708L12.043,7.061a1.5,1.5,0,0,1,2.121-2.122L18.75,9.525a3.505,3.505,0,0,1,0,4.95l-4.586,4.586A1.5,1.5,0,0,1,13.1,19.5Z"/><path d="M6.1,19.5a1.5,1.5,0,0,1-1.061-2.561L9.982,12,5.043,7.061A1.5,1.5,0,0,1,7.164,4.939l6,6a1.5,1.5,0,0,1,0,2.122l-6,6A1.5,1.5,0,0,1,6.1,19.5Z"/></svg>
                                 </div>
                               </div>
                               <div class="sub-card__body ${subCardData.getClasses[2]}">
                                 <div class="sub-card__space"></div>
                               </div>`;
          div.appendChild(subCard);
        });
        
        let cardLogo;
            if(cardData.getLogoInfo.getType === "img"){
              if(!subCardData.getLogoInfo.isPng){
                cardLogo = `<img src="${cardData.getImage}/>`;
              }else{
                cardLogo = `<img src="${cardData.getImage}" style="background-color:red"/>`;
              };
            }else if(cardData.getLogoInfo.getType === "txt"){
              cardLogo = `<span style="background-color:${cardData.getLogoInfo.getAvatarColor}">${cardData.getAvatar}</span>`;
            };
        
        const card = `<div class="card">
                        <div class="card__header">
                          <div class="header__logo">${cardLogo}</div>
                          <div class="header__details">
                            <div class="header__title">
                              <span>${cardData.getInformation.getDay}</span>
                            </div>
                            <div class="header__description">
                              <span>${cardData.getInformation.getDate}</span>
                            </div>
                          </div>
                          <div class="card__amount">
                              <span>₹${numberWithCommas(cardData.getAmount)}</span>
                          </div>
                        </div>
                        <div class="card__body">
                          <div class="card__space"></div>
                          <div class="card__details">
                            <div class="details">${div.innerHTML}</div>
                          </div>
                        </div>
                      </div>`;

        if (type === "collections") {
          let div = document.querySelector(".total-collection");
          div.innerHTML = `<span>₹${numberWithCommas(totalCollection+=cardData.getAmount)}</span>`;
          document.querySelector(".default-collection").insertAdjacentHTML("afterEnd", card);
          sessionStorage.setItem("totalCollection", `${totalCollection}`)
        } else if (type === "expenses") {
          let div = document.querySelector(".total-expenses");
          div.innerHTML = `<span>₹${numberWithCommas(totalExpanses+=cardData.getAmount)}</span>`;
          document.querySelector(".default-expanse").insertAdjacentHTML("afterEnd", card);
          sessionStorage.setItem("totalExpanses", `${totalExpanses}`)
        };
      });
      
      let div = document.querySelectorAll(".remaining-amount__amount");
      let remainingAmountLogo = document.querySelectorAll(".remaining-amount__logo .logo");
      let remainingAmount = Number(sessionStorage.getItem("totalCollection")) - Number(sessionStorage.getItem("totalExpanses"));
      
      if(remainingAmount >= 0){
        div.forEach((div) => {
          div.innerHTML = `<span>₹${numberWithCommas(remainingAmount)}</span>`;
          remainingAmountLogo.forEach((logo) => {
            logo.style.fill = "#2FDF85"
            logo.innerHTML = `<svg xmlns="http://www.w3.org/2000/svg" id="Layer_1" data-name="Layer 1" viewBox="0 0 24 24"><path d="M20.5,6h-5c-.828,0-1.5,.672-1.5,1.5s.672,1.5,1.5,1.5h3.379l-5.879,5.879-4.119-4.119c-1.037-1.037-2.725-1.037-3.762,0L.439,15.439c-.586,.586-.586,1.535,0,2.121s1.535,.586,2.121,0l4.439-4.439,4.119,4.119c.519,.519,1.199,.778,1.881,.778s1.362-.26,1.881-.778l6.119-6.119v3.379c0,.828,.672,1.5,1.5,1.5s1.5-.672,1.5-1.5v-5c0-1.93-1.57-3.5-3.5-3.5Z"/></svg>`;
          });
        });
      }else{
        div.forEach((div) => {
          div.innerHTML = `<span>-₹${numberWithCommas(Math.abs(remainingAmount))}</span>`;
        });
        remainingAmountLogo.forEach((logo) => {
          logo.style.fill = "#FF0000"
          logo.innerHTML = `<svg xmlns="http://www.w3.org/2000/svg" id="Layer_1" data-name="Layer 1" viewBox="0 0 24 24"><path d="M24,9.5v5c0,1.93-1.57,3.5-3.5,3.5h-5c-.828,0-1.5-.672-1.5-1.5s.672-1.5,1.5-1.5h3.379l-5.879-5.879-4.119,4.119c-1.037,1.037-2.725,1.037-3.762,0L.439,8.561c-.586-.586-.586-1.535,0-2.121s1.535-.586,2.121,0l4.439,4.439,4.08-4.08c1.059-1.059,2.781-1.059,3.84,0l6.08,6.08v-3.379c0-.828,.672-1.5,1.5-1.5s1.5,.672,1.5,1.5Z"/></svg>`;
        });
      }
    };
    
    
    function addDetails(cardData){
      cardData.forEach((cardData, index) => {
        cardData.forEach((cardData, i) => {
          let subCardData;
          if (index === 0) {
            subCardData = cardData.getCollections;
          }else if (index === 1) {
            subCardData = cardData.getExpenses;
          };
          
          subCardData.forEach((subCardData) => {
            if (subCardData.getId === localStorage.getItem("clickedSubCardId")) {
              detailsCardData[i] = cardData;
            }
          });
        });
      });
    };
    
    function createDetailsCard(cardData){
      cardData.forEach((cardData) => {
        let subCardData;
        if(cardData.getCollections){
          subCardData = cardData.getCollections;
        }else if (cardData.getExpenses) {
          subCardData = cardData.getExpenses;
        };
        
        const div = document.createElement("div");
        
        subCardData.forEach((subCardData) => {
          if (subCardData.getId === localStorage.getItem("clickedSubCardId")) {
            let subCardTitle;
            if (subCardData.getTitle) {
              subCardTitle = subCardData.getTitle;
            }else{
              subCardTitle = subCardData.getInformation.getTitle;
            }
            let subCard = document.createElement("div");
            subCard.classList.add("sub-card");
            subCard.innerHTML = `<div class="sub-card__space" style="background-color: ${cardData.getLogoInfo.getAvatarColor}">
                                 </div>
                                 <div class="sub-card__details">
                                   <div class="sub-card__title">
                                     <span>${subCardTitle}</span>
                                   </div>
                                   <div class="sub-card__description">
                                     <span>₹${numberWithCommas(subCardData.getInformation.getAmount)}</span>
                                   </div>
                                 </div>`;
            div.appendChild(subCard);
          };
        });
        
        const card = `<div class="card">
                        <div class="card__header">
                          <div class="header__title">
                            <span>${cardData.getInformation.getDate}</span>
                          </div>
                        </div>
                        <div class="card__details">
                          <div class="details">${div.innerHTML}</div>
                        </div>
                      </div>`
        
        document.querySelector(".default-card").insertAdjacentHTML("beforeEnd", card);
      });
    };
    
    function setMainCardBackgroundColor(){
      let mainCard = document.querySelectorAll(".main-card");
      mainCard.forEach((mainCard) => {
        let mainCardLogo = mainCard.querySelector(".main-card .total-amount__logo .logo");
        let mainCardBackgroundColor = window.getComputedStyle(mainCardLogo).borderColor;
        mainCardBackgroundColor = mainCardBackgroundColor.replace('rgb', 'rgba').replace(')', ', 0.1)');
        if (window.matchMedia && window.matchMedia('(prefers-color-scheme: light)').matches) {
          mainCard.setAttribute("style", `--surfaceColor: ${mainCardBackgroundColor}`)
        }
        
        window.matchMedia('(prefers-color-scheme: dark)').addEventListener('change', (e) => {
          if (window.matchMedia && window.matchMedia('(prefers-color-scheme: light)').matches) {
            mainCard.setAttribute("style", `--surfaceColor: ${mainCardBackgroundColor}`)
          }else {
            mainCard.setAttribute("style", `--surfaceColor: #252525`)
          }
        });
      });
    };
    
    function setSubCardBackgroundColor() {
      let card = document.querySelectorAll(".card");
      
      card.forEach((card) => {
        let avatar = card.querySelector(".card .header__logo span");
        let subCard = card.querySelectorAll(".sub-card__header");
        
        subCard.forEach((subCard) => {
          let subCardBackgroundColor = window.getComputedStyle(avatar).backgroundColor;
          subCardBackgroundColor = subCardBackgroundColor.replace('rgb', 'rgba').replace(')', ', 0.1)');
          if (window.matchMedia && window.matchMedia('(prefers-color-scheme: light)').matches) {
            subCard.setAttribute("style", `--surfaceColor: ${subCardBackgroundColor}`)
          }
          
         window.matchMedia('(prefers-color-scheme: dark)').addEventListener('change', (e) => {
           if (window.matchMedia && window.matchMedia('(prefers-color-scheme: light)').matches) {
             subCard.setAttribute("style", `--surfaceColor: ${subCardBackgroundColor}`)
           }else {
             subCard.setAttribute("style", `--surfaceColor: #252525`)
           }
         });
          
        });
      });
    };
    
    function setDetailsSubCardBackgroundColor() {
      let card = document.querySelectorAll(".activity_details .card");
      
      card.forEach((card) => {
        let avatar = card.querySelector(".sub-card__space");
        let subCard = card.querySelectorAll(".sub-card");
        
        subCard.forEach((subCard) => {
          let subCardBackgroundColor = window.getComputedStyle(avatar).backgroundColor;
          subCardBackgroundColor = subCardBackgroundColor.replace('rgb', 'rgba').replace(')', ', 0.1)');
          if (window.matchMedia && window.matchMedia('(prefers-color-scheme: light)').matches) {
            subCard.setAttribute("style", `--surfaceColor: ${subCardBackgroundColor}`)
          }
          
         window.matchMedia('(prefers-color-scheme: dark)').addEventListener('change', (e) => {
           if (window.matchMedia && window.matchMedia('(prefers-color-scheme: light)').matches) {
             subCard.setAttribute("style", `--surfaceColor: ${subCardBackgroundColor}`)
           }else {
             subCard.setAttribute("style", `--surfaceColor: #252525`)
           }
         });
          
        });
      });
    };
    
    function numberWithCommas(number) {
        return number.toString().replace(/\B(?=(\d{3})+(?!\d))/g, ",");
    };
  </script>

</body>
</html>